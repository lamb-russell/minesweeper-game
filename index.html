<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minesweeper Game</title>
    <style>
        * {
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            background-color: #f0f0f0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
        }

        .board {
            display: grid;
            grid-template-columns: repeat(10, 1fr);
            gap: 1px;
            width: 90vw;
            height: 90vw;
            max-width: 600px;
            max-height: 600px;
        }

        .cell {
            background-color: #fff;
            border: 1px solid #999;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1rem;
            font-weight: bold;
        }

        .cell.revealed {
            background-color: #e0e0e0;
            cursor: default;
        }

        .cell.mine {
            background-color: #f06e6e;
        }

        .cell.flag {
            background-color: #ffc107;
        }

        .cell.questionmark {
            background-color: #ff9a9a;
        }
    </style>
</head>
<body>
    <div class="board"></div>
    <script>
        const board = document.querySelector('.board');
        let mineField;

        function createMinefield(height, width, mines) {
            const totalCells = height * width;
            const mineArray = Array(mines).fill('mine').concat(Array(totalCells - mines).fill('.'));
            mineArray.sort(() => Math.random() - 0.5);

            mineField = [];
            for (let i = 0; i < height; i++) {
                mineField.push(mineArray.slice(i * width, i * width + width));
            }
        }

        function renderBoard() {
            board.innerHTML = '';
            for (let i = 0; i < mineField.length; i++) {
                for (let j = 0; j < mineField[i].length; j++) {
                    const cell = document.createElement('div');
                    cell.classList.add('cell');
                    cell.dataset.x = i;
                    cell.dataset.y = j;

                    // Left click to reveal
                    cell.addEventListener('click', () => revealCell(i, j));

                    board.appendChild(cell);
                }
            }
        }

        function countAdjacentMines(x, y) {
            let minesCount = 0;
            for (let i = x - 1; i <= x + 1; i++) {
                for (let j = y - 1; j <= y + 1; j++) {
                    if (i < 0 || i >= mineField.length || j < 0 || j >= mineField[0].length) continue;
                    if (mineField[i][j] === 'mine') minesCount++;
                }
            }
            return minesCount;
        }

        function revealCell(x, y) {
            const cellIndex = x * mineField[0].length + y;
            const cell = board.children[cellIndex];

            if (cell.classList.contains('revealed') || cell.classList.contains('flag')) return;

            cell.classList.add('revealed');

            if (mineField[x][y] === 'mine') {
                cell.classList.add('mine');
                alert('Game Over!');
                revealAllMines();
                return;
            }

            const adjacentMines = countAdjacentMines(x, y);

            if (adjacentMines > 0) {
                cell.textContent = adjacentMines;
            } else {
                const queue = [[x, y]];
                while (queue.length > 0) {
                    const [cx, cy] = queue.shift();
                    for (let i = cx - 1; i <= cx + 1; i++) {
                        for (let j = cy - 1; j <= cy + 1; j++) {
                            if (
                                i >= 0 &&
                                i < mineField.length &&
                                j >= 0 &&
                                j < mineField[0].length
                            ) {
                                const adjCellIndex = i * mineField[0].length + j;
                                const adjCell = board.children[adjCellIndex];
                                if (!adjCell.classList.contains('revealed') && !adjCell.classList.contains('flag')) {
                                    adjCell.classList.add('revealed');
                                    const adjMines = countAdjacentMines(i, j);
                                    if (adjMines > 0) {
                                        adjCell.textContent = adjMines;
                                    } else {
                                        queue.push([i, j]);
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }

        function revealAllMines() {
            for (let i = 0; i < mineField.length; i++) {
                for (let j = 0; j < mineField[i].length; j++) {
                    if (mineField[i][j] === 'mine') {
                        const cellIndex = i * mineField[0].length + j;
                        const cell = board.children[cellIndex];
                        cell.classList.add('mine');
                    }
                }
            }
        }

        board.addEventListener('contextmenu', (event) => {
            event.preventDefault();
            const cell = event.target;
            if (cell.classList.contains('cell') && !cell.classList.contains('revealed')) {
                if (cell.classList.contains('flag')) {
                    cell.classList.remove('flag');
                    cell.classList.add('questionmark');
                } else if (cell.classList.contains('questionmark')) {
                    cell.classList.remove('questionmark');
                } else {
                    cell.classList.add('flag');
                }
            }
        });

        function game() {
            createMinefield(10, 10, 10);
            renderBoard();
        }

        // Start the game when the page loads
        window.onload = game;
    </script>
</body>
</html>
